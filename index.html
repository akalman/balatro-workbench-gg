<html>
<body>

  <select disabled name="one" id="one">
    <option selected value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="two" id="two">
    <option selected value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="three" id="three">
    <option selected value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="four" id="four">
    <option value="A">A</option>
    <option selected value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="five" id="five">
    <option value="A">A</option>
    <option value="K">K</option>
    <option selected value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="six" id="six">
    <option value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option selected value="J">J</option>
    <option value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="seven" id="seven">
    <option value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option selected value="10">10</option>
    <option value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <select disabled name="eight" id="eight">
    <option value="A">A</option>
    <option value="K">K</option>
    <option value="Q">Q</option>
    <option value="J">J</option>
    <option value="10">10</option>
    <option selected value="9">9</option>
    <option value="8">8</option>
    <option value="7">7</option>
    <option value="6">6</option>
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
  </select>

  <button id="button">Go</button>

  <div id="output">
  </div>

    <script type="text/javascript">
      const calc = () => {
        const ids = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight'];
        const startingHand = []
        const deck = {
          A: 4,
          K: 4,
          Q: 4,
          J: 4,
          '10': 4,
          '9': 4,
          '8': 4,
          '7': 4,
          '6': 4,
          '5': 4,
          '4': 4,
          '3': 4,
          '2': 4,
        };

        ids.forEach(x => {
          let val = document.getElementById(x).value;
          startingHand.push(val);
          deck[val] = deck[val] - 1;
        });

        const calcScore = (d, topdeck) => {
          let newHand = startingHand.slice(3).slice(0, 5-d).concat(topdeck.slice(0,d));
          // console.log(newHand);
          let handSet = {};
          newHand.forEach(x => handSet[x] = 1);
          return Object.keys(handSet).length === 5 ? 0 : 1;
        };

        let count = 0;
        let numWinsDiscard1 = 0;
        let numWinsDiscard2 = 0;
        let numWinsDiscard3 = 0;
        let numWinsDiscard4 = 0;
        let numWinsDiscard5 = 0;

        const recurr = (topdeck, deckleft) => {
          if (topdeck.length >= 5) {
            count++;
            numWinsDiscard1 += calcScore(1, topdeck);
            numWinsDiscard2 += calcScore(2, topdeck);
            numWinsDiscard3 += calcScore(3, topdeck);
            numWinsDiscard4 += calcScore(4, topdeck);
            numWinsDiscard5 += calcScore(5, topdeck);
          } else {
            Object.keys(deckleft).forEach(y => {
              if (deckleft[y] > 0)
                recurr(topdeck.concat([y]), Object.assign({}, deckleft, { [y]: deckleft[y]-1 }));
            });
          }
        };

        recurr([], deck);

        let outputDiv = document.getElementById('output');
        outputDiv.innerHTML = `
        <div>probability for drawing a pair</div>
        <div>when discarding 1 card: ${numWinsDiscard1/count}</div>
        <div>when discarding 2 cards: ${numWinsDiscard2/count}</div>
        <div>when discarding 3 cards: ${numWinsDiscard3/count}</div>
        <div>when discarding 4 cards: ${numWinsDiscard4/count}</div>
        <div>when discarding 5 cards: ${numWinsDiscard5/count}</div>`

        // console.log(count);
        // console.log(numWinsDiscard1);
        // console.log(numWinsDiscard2);
        // console.log(numWinsDiscard3);
        // console.log(numWinsDiscard4);
        // console.log(numWinsDiscard5);
      };

      document.getElementById("button").onclick = calc;
    </script>

</body>
</html>
